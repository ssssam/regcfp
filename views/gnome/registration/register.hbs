{{#if submission_error}}
<div class="validation">Something went wrong: {{submission_error}}.</div>
{{/if}}

<form action="/registration/register" method="post">
<table class="submission-form">
<tr><td>&nbsp;</td><td>
<h2>GUADEC registration information</h2>

<p>
All GUADEC attendees are required to register. By completing this registration
form, you are committing to follow the
<a href="https://2017.guadec.org/code-of-conduct/">GUADEC code of conduct</a>.
</p>

</td></tr>

<tr><td><label for="reg-name">Your name</label></td><td><input type="text" id="reg-name" name="name" value="{{user.name}}" {{#if user }}disabled{{/if}}/></td></tr>
<input type="hidden" name="is_public" value="true">

<tr><td><label for="reg-{{ircnick}}">{{ registration_fields.ircnick.display_name }}</label></td>
<td>
  {{>field_entry id="ircnick" field=registration_fields.ircnick currency=config.registration.main_currency}}

  {{#if registration_fields.ircnick.message}}
    <br/>
    <p class="note">{{registration_fields.ircnick.message}}</p>
  {{/if}}
</td>
</tr>

<tr><td><label for="reg-{{volunteer}}">{{ registration_fields.volunteer.display_name }}</label></td>
<td>
  {{>field_entry id="volunteer" field=registration_fields.volunteer currency=config.registration.main_currency}}

  {{#if registration_fields.volunteer.message}}
    <br/>
    <p class="note">{{registration_fields.volunteer.message}}</p>
  {{/if}}
</td>
</tr>

<tr><td>&nbsp;</td><td><label><input type="checkbox" id="reg-public" value="false" name="is_public" 
{{#unless registration.is_public}}
checked
{{/unless}}
> Hide my name in the public list of attendees</label></td></tr>
</tr>

{{#has_permission "registration/pay"}}
<tr><td>&nbsp;</label></td><td>
<h3>Registration Fee</h3>
Please support GUADEC and GNOME by choosing to pay a fee that is reasonable for
you.
{{#unless registration.paid}}
  <p>
  {{>currency_selector}} <input type="text" id="reg-fee" name="regfee" class="reg-fee" value="40" />
  </p>
  <div id="reg-fee-slider-label" style="display: none">Conference registration (excluding workshop):</div>
  <div id="reg-fee-slider" ></div>
{{else}}
  {{>currency_selector selected=registration.currency disabled="disabled"}} <input type="text" id="reg-fee" name="regfee" class="reg-fee" value="{{registration.regfee}}" disabled="disabled">

  {{#if registration.has_confirmed_payment }} {{registration.paid}} paid {{/if}}
  {{#if registration.has_outstanding_onsite }}
    {{#if registration.has_confirmed_payment }}, {{/if}}
    {{registration.outstanding_onsite}} to be paid
  {{/if}}
{{/unless}}

<p class="note">We can issue refunds on registration fees until 30th June 2017.
â‚¬10 will be deducted to cover payment processing fees. Refunds will not be
issued for cancellations after the 30th of June. Please mail <a
href="mailto:guadec-organization@gnome.org">guadec-organization@gnome.org</a>
for any cancelation.
</p>
</tr>

</td></tr>

{{/has_permission}}

{{#each registration_fields}}
{{#ifEqual @key "ircnick"}}{{else}}{{#ifEqual @key "volunteer"}}{{else}}
  <tr><td><label for="reg-{{@key}}">{{ this.display_name }}</label></td>
  <td>
    {{>field_entry id=@key field=this currency=../config.registration.main_currency}}

    {{#if this.message}}
      <br/>
      <p class="note">{{this.message}}</p>
    {{/if}}
  </td>
  </tr>
{{/ifEqual}}{{/ifEqual}}
{{/each}}

<tr><td>&nbsp;</td>

<tr><td>Total to pay</td><td id="reg-total">[JavaScript required to calculate]</td>

<td><input class="submit-talk" type="submit" value="Submit" /></td>
</tr>

</table>
</form>
